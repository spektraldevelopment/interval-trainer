function init(){phase=document.querySelector("#phase"),countdownTimer=document.querySelector("#countdownTimer"),sessionTime=document.querySelector("#sessionTime"),warmMin=document.querySelector("#warmup-min"),warmSec=document.querySelector("#warmup-sec"),workMin=document.querySelector("#workout-min"),workSec=document.querySelector("#workout-sec"),restMin=document.querySelector("#rest-min"),restSec=document.querySelector("#rest-sec"),rounds=document.querySelector("#rounds"),coolMin=document.querySelector("#cooldown-min"),coolSec=document.querySelector("#cooldown-sec"),startWK=document.querySelector("#startWorkout"),initValues(),initEvents()}function initValues(){warmMin.value=formatTime(data.warmup).minutes,warmSec.value=formatTime(data.warmup).seconds,workMin.value=formatTime(data.work).minutes,workSec.value=formatTime(data.work).seconds,restMin.value=formatTime(data.rest).minutes,restSec.value=formatTime(data.rest).seconds,rounds.value=data.rounds,coolMin.value=formatTime(data.cooldown).minutes,coolSec.value=formatTime(data.cooldown).seconds,getTotalTime()}function initEvents(){var a,b,c=document.querySelectorAll(".plusbutton"),d=document.querySelectorAll(".minusbutton");for(a=0;a<c.length;a+=1)Spektral.attachEventListener(c[a],"mousedown",onIncrementDown);for(b=0;b<d.length;b+=1)Spektral.attachEventListener(d[b],"mousedown",onIncrementDown);Spektral.attachEventListener(startWK,"click",onStartWorkout)}function onIncrementDown(a){var b=Spektral.getTarget(a),c=b.id;Spektral.detachEventListener(b,"mousedown",onIncrementDown),Spektral.attachEventListener(b,"mouseup",onIncrementUp),updateValues(c),incrementTimer=Spektral.createTimer(.15,function(){updateValues(c)})}function onIncrementUp(a){var b=Spektral.getTarget(a);Spektral.stopTimer(incrementTimer),incrementTimer=!1,Spektral.attachEventListener(b,"mousedown",onIncrementDown),Spektral.detachEventListener(b,"mouseup",onIncrementUp)}function updateValues(a){"warm-plus"===a?data.warmup++:"workout-plus"===a?data.work++:"rest-plus"===a?data.rest++:"rounds-plus"===a?data.rounds++:"cooldown-plus"===a?data.cooldown++:"warm-minus"===a?(data.warmup--,data.warmup<0&&(data.warmup=0)):"workout-minus"===a?(data.work--,data.work<0&&(data.work=0)):"rest-minus"===a?(data.rest--,data.rest<0&&(data.rest=0)):"rounds-minus"===a?(data.rounds--,data.rounds<1&&(data.rounds=1)):"cooldown-minus"===a?(data.cooldown--,data.cooldown<0&&(data.cooldown=0)):"warm-minus"===a?(data.warmup--,data.warmup<0&&(data.warmup=0)):console.warn("Unrecognized id: "+a),warmMin.value=formatTime(data.warmup).minutes,warmSec.value=formatTime(data.warmup).seconds,workMin.value=formatTime(data.work).minutes,workSec.value=formatTime(data.work).seconds,restMin.value=formatTime(data.rest).minutes,restSec.value=formatTime(data.rest).seconds,rounds.value=data.rounds,coolMin.value=formatTime(data.cooldown).minutes,coolSec.value=formatTime(data.cooldown).seconds,getTotalTime()}function onStartWorkout(){function a(){var a=data.work;currentPhase="workout",setWorkoutPhase("Work Out"),phaseTimer=Spektral.createTimer(1,function(){a--,0>=a&&(Spektral.stopTimer(phaseTimer),phaseTimer=!1,b())})}function b(){var a=data.rest;currentPhase="rest",setWorkoutPhase("Rest"),phaseTimer=Spektral.createTimer(1,function(){a--,0>=a&&(currentRound>0?(currentRound--,b()):(console.log("End of rounds, starting cooldown."),c()))})}function c(){var a=data.cooldown;currentPhase="cooldown",setWorkoutPhase("Cool down"),phaseTimer=Spektral.createTimer(1,function(){a--,0>=a&&(Spektral.stopTimer(phaseTimer),phaseTimer=!1,currentPhase="complete",setWorkoutPhase("Complete"))})}var d=data.warmup;currentPhase="warmup",setWorkoutPhase("Warm Up"),phaseTimer=Spektral.createTimer(1,function(){d--,0>=d&&(Spektral.stopTimer(phaseTimer),phaseTimer=!1,a())},1e3),currentRound=data.rounds}function setWorkoutPhase(a,b){a.innerHTML="Current Phase: "+a+" "+b}function getTotalTime(){data.warmup+(data.work+data.rest)*data.rounds+data.cooldown}function convertToSeconds(a){var b,c,d,e,f,g,h,i,j=getType(a);return"number"===j?b=a:(c=matchPattern(a,":"),c.isMatch===!1?b=parseInt(a):(i=c.matchArray,1===c.amount?(g=parseInt(i[0]),h=parseInt(i[1]),d=60*g,b=d+h):(f=parseInt(i[0]),g=parseInt(i[1]),h=parseInt(i[2]),e=60*f*60,d=60*g,b=e+d+h))),b}function formatTime(a){var b={},c=Math.floor(a/3600),d=a%3600;return minutes=Math.floor(d/60),seconds=Math.floor(d%60),secondsString=seconds.toString(),10>seconds&&(secondsString="0"+secondsString),b.hours=c.toString(),b.minutes=minutes.toString(),b.seconds=secondsString,b.hoursNum=c,b.minutesNum=minutes,b.secondsNum=seconds,b}var data,countdownTimer,sessionTime,phase,warmMin,warmSec,workMin,workSec,restMin,restSec,rounds,coolMin,coolSec,incrementTimer=!1,startWK,currentPhase="stopped",currentRound,phaseTimer=!1,overallTimer=!1;data={warmup:8,work:5,rest:10,rounds:4,cooldown:6};